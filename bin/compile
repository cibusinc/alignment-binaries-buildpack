#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

echo "-----> Installing muscle."
# change to build dir
cd $1

for PROGRAM in muscle clustalw2 clustalo
do

  # download from s3
  curl https://s3-us-west-2.amazonaws.com/sif-sprint/alignment_algorithms/${PROGRAM}_linux.tar.gz -L -o ${PROGRAM}.tar.gz
  # make target dir
  mkdir -p vendor/${PROGRAM}
  # unzip
  tar -C vendor/${PROGRAM} -xvzf ${PROGRAM}.tar.gz
  # clean up
  rm ${PROGRAM}.tar.gz

done

# add profile-d scripts to set up PATH
mkdir -p .profile.d
echo 'PATH=$PATH:$HOME/vendor' > .profile.d/alignment_algorithms.sh
